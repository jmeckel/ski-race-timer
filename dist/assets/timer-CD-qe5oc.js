var W=Object.defineProperty;var O=(i,t,e)=>t in i?W(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var a=(i,t,e)=>O(i,typeof t!="symbol"?t+"":t,e);import{w as U,L as q,u as I,s as c,t as k,a9 as X,aa as F,ab as Y,p as u,ac as K,d as p,l as Q,N as j,ad as G,R as _,_ as V,h as J,f as Z,q as tt,ae as et,E as it,af as nt,ag as st,ah as at,$ as ot,ai as rt}from"./chief-judge-DZDn8YDo.js";import{m as C}from"./vendor-signals-BA-R9xnX.js";class ct{constructor(t,e){a(this,"callbacks");a(this,"config");a(this,"rotation",0);a(this,"velocity",0);a(this,"accumulatedRotation",0);a(this,"spinAnimationId",null);a(this,"snapBackAnimationId",null);a(this,"snapBackTimeoutId",null);a(this,"visualTimeoutIds",new Set);a(this,"frameCount",0);a(this,"isDestroyed",!1);a(this,"prefersReducedMotion",!1);a(this,"motionMediaQuery",null);a(this,"onMotionPreferenceChange",t=>{this.prefersReducedMotion=t.matches,this.prefersReducedMotion&&(this.cancelAllAnimations(),this.rotation!==0&&(this.rotation=0,this.callbacks.onRotationUpdate(0),this.callbacks.onAnimationComplete()))});a(this,"spinWithMomentum",()=>{if(Math.abs(this.velocity)<.2){this.velocity=0,this.callbacks.onAnimationComplete(),this.scheduleSnapBack();return}this.rotation+=this.velocity,this.accumulatedRotation+=this.velocity,this.velocity*=this.config.friction,this.shouldSkipFrame()||this.callbacks.onRotationUpdate(this.rotation),this.checkDigitChange(),this.spinAnimationId=requestAnimationFrame(this.spinWithMomentum)});a(this,"snapBack",()=>{if(Math.abs(this.rotation)<1){this.rotation=0,this.callbacks.onRotationUpdate(this.rotation),this.snapBackAnimationId=null,this.callbacks.onAnimationComplete();return}this.rotation*=1-.15,this.shouldSkipFrame()||this.callbacks.onRotationUpdate(this.rotation),this.snapBackAnimationId=requestAnimationFrame(this.snapBack)});this.callbacks=t,this.config=e,typeof window<"u"&&window.matchMedia&&(this.motionMediaQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this.prefersReducedMotion=this.motionMediaQuery.matches,this.motionMediaQuery.addEventListener("change",this.onMotionPreferenceChange))}getRotation(){return this.rotation}getVelocity(){return this.velocity}onDragStart(){this.cancelAllAnimations(),this.velocity=0,this.accumulatedRotation=0}onDragMove(t,e){this.velocity=t/e*16*this.config.momentum,this.rotation+=t,this.accumulatedRotation+=t,this.callbacks.onRotationUpdate(this.rotation),this.checkDigitChange()}startMomentumSpin(){if(this.prefersReducedMotion){this.processDigitChangesInstantly(),this.velocity=0,this.rotation=0,this.callbacks.onRotationUpdate(0),this.callbacks.onAnimationComplete();return}this.spinWithMomentum()}onDragEndNoMomentum(){if(this.prefersReducedMotion){this.rotation=0,this.callbacks.onRotationUpdate(0),this.callbacks.onAnimationComplete();return}this.scheduleSnapBack()}pauseAnimations(){this.cancelAllAnimations()}flash(t,e){if(this.prefersReducedMotion)return;t==null||t.classList.add("flash"),e==null||e.querySelectorAll(".dial-number").forEach((s,o)=>{const d=window.setTimeout(()=>{this.visualTimeoutIds.delete(d),s.classList.add("flash");const h=window.setTimeout(()=>{s.classList.remove("flash"),this.visualTimeoutIds.delete(h)},200);this.visualTimeoutIds.add(h)},o*40);this.visualTimeoutIds.add(d)});const n=window.setTimeout(()=>{t==null||t.classList.remove("flash"),this.visualTimeoutIds.delete(n)},1200);this.visualTimeoutIds.add(n)}flashDigit(t){this.prefersReducedMotion||this.flashClass(t,"flash",150)}flashPressed(t){this.prefersReducedMotion||this.flashClass(t,"pressed",150)}destroy(){var t;if(!this.isDestroyed){this.isDestroyed=!0,this.cancelAllAnimations();for(const e of this.visualTimeoutIds)clearTimeout(e);this.visualTimeoutIds.clear(),(t=this.motionMediaQuery)==null||t.removeEventListener("change",this.onMotionPreferenceChange),this.motionMediaQuery=null}}processDigitChangesInstantly(){let t=this.velocity,e=this.accumulatedRotation;for(;Math.abs(t)>=.2;)for(e+=t,t*=this.config.friction;Math.abs(e)>=this.config.sensitivity;){const n=e>0?1:-1;this.callbacks.onDigitChange(n),e-=n*this.config.sensitivity}this.accumulatedRotation=e}cancelAllAnimations(){this.spinAnimationId&&(cancelAnimationFrame(this.spinAnimationId),this.spinAnimationId=null),this.snapBackAnimationId&&(cancelAnimationFrame(this.snapBackAnimationId),this.snapBackAnimationId=null),this.snapBackTimeoutId&&(clearTimeout(this.snapBackTimeoutId),this.snapBackTimeoutId=null)}flashClass(t,e,n){t.classList.add(e);const s=window.setTimeout(()=>{t.classList.remove(e),this.visualTimeoutIds.delete(s)},n);this.visualTimeoutIds.add(s)}shouldSkipFrame(){this.frameCount++;const t=U.getStatus().batteryLevel;return t==="low"?this.frameCount%2!==0:t==="critical"?this.frameCount%4!==0:!1}scheduleSnapBack(){this.snapBackTimeoutId&&clearTimeout(this.snapBackTimeoutId),this.snapBackTimeoutId=window.setTimeout(()=>{this.snapBack()},800)}checkDigitChange(){if(Math.abs(this.accumulatedRotation)>=this.config.sensitivity){const t=this.accumulatedRotation>0?1:-1;this.callbacks.onDigitChange(t),this.accumulatedRotation=this.accumulatedRotation%this.config.sensitivity}}}class lt{constructor(t,e){a(this,"container");a(this,"callbacks");a(this,"listeners",new q);a(this,"isDragging",!1);a(this,"lastAngle",0);a(this,"lastDragTime",0);a(this,"dragStartPos",null);a(this,"hasDraggedSignificantly",!1);a(this,"lastTouchTime",0);a(this,"isDestroyed",!1);a(this,"handleDragStart",t=>{const e="touches"in t;if(!e&&Date.now()-this.lastTouchTime<500)return;e&&(this.lastTouchTime=Date.now());const n=this.container.getBoundingClientRect(),s=e?t.touches[0].clientX:t.clientX,o=e?t.touches[0].clientY:t.clientY,d=n.left+n.width/2,h=n.top+n.height/2,f=Math.sqrt((s-d)**2+(o-h)**2);f<n.width*.27||f>n.width*.5||(this.callbacks.onDragStart(),this.dragStartPos={x:s,y:o},this.hasDraggedSignificantly=!1,this.isDragging=!0,this.lastAngle=this.getAngle(s,o,n),this.lastDragTime=Date.now())});a(this,"handleDragMove",t=>{if(!this.isDragging)return;const e="touches"in t?t.touches[0].clientX:t.clientX,n="touches"in t?t.touches[0].clientY:t.clientY;if(this.dragStartPos&&!this.hasDraggedSignificantly)if(Math.sqrt((e-this.dragStartPos.x)**2+(n-this.dragStartPos.y)**2)>10)this.hasDraggedSignificantly=!0;else return;t.preventDefault();const s=this.container.getBoundingClientRect(),o=this.getAngle(e,n,s);let d=o-this.lastAngle;d>180&&(d-=360),d<-180&&(d+=360);const h=Date.now(),f=Math.max(h-this.lastDragTime,1);this.callbacks.onDragMove(d,f),this.lastAngle=o,this.lastDragTime=h});a(this,"handleDragEnd",()=>{if(this.isDragging){if(this.isDragging=!1,!this.hasDraggedSignificantly&&this.dragStartPos){this.detectNumberTap(),this.dragStartPos=null,this.callbacks.onDragEndAsTap();return}this.dragStartPos=null,Math.abs(this.callbacks.getVelocity())>.5?this.callbacks.onDragEndWithMomentum():this.callbacks.onDragEndCommon()}});this.container=t,this.callbacks=e}bindEvents(){this.listeners.add(this.container,"mousedown",this.handleDragStart),this.listeners.add(window,"mousemove",this.handleDragMove),this.listeners.add(window,"mouseup",this.handleDragEnd),this.listeners.add(this.container,"touchstart",this.handleDragStart,{passive:!1}),this.listeners.add(window,"touchmove",this.handleDragMove,{passive:!1}),this.listeners.add(window,"touchend",this.handleDragEnd)}getDragState(){return{isDragging:this.isDragging,hasDraggedSignificantly:this.hasDraggedSignificantly}}destroy(){this.isDestroyed||(this.isDestroyed=!0,this.listeners.removeAll())}detectNumberTap(){if(!this.dragStartPos)return;const t=this.container.getBoundingClientRect(),e=t.left+t.width/2,n=t.top+t.height/2;let s=Math.atan2(this.dragStartPos.y-n,this.dragStartPos.x-e)*(180/Math.PI);s-=this.callbacks.getRotation(),s=(s%360+360)%360;const o=[1,2,3,4,5,6,7,8,9,0];let d=0,h=360;o.forEach((f,g)=>{const l=(g*36-90+360)%360;let m=Math.abs(s-l);m>180&&(m=360-m),m<h&&m<20&&(h=m,d=f)}),h<20&&this.callbacks.onNumberTap(d)}getAngle(t,e,n){const s=n.left+n.width/2,o=n.top+n.height/2;return Math.atan2(e-o,t-s)*(180/Math.PI)}}class dt{constructor(t,e={}){a(this,"container");a(this,"dialNumbers",null);a(this,"dialRing",null);a(this,"options");a(this,"interaction",null);a(this,"animation");a(this,"resizeObserver",null);a(this,"lastContainerWidth",0);a(this,"numberKeydownListeners",new Map);a(this,"cachedNumberSpans",[]);a(this,"cachedNumberElements",new Map);a(this,"isDestroyed",!1);a(this,"visibilityHandler",null);a(this,"bibValue","");this.container=t,this.options={onChange:e.onChange||(()=>{}),momentum:e.momentum??1.5,friction:e.friction??.97,sensitivity:e.sensitivity??24},this.animation=new ct({onRotationUpdate:n=>this.updateDialRotation(n),onDigitChange:n=>this.adjustBib(n),onAnimationComplete:()=>{var n;return(n=this.dialNumbers)==null?void 0:n.classList.remove("momentum")}},{momentum:this.options.momentum,friction:this.options.friction,sensitivity:this.options.sensitivity}),this.init()}init(){if(this.dialNumbers=this.container.querySelector(".dial-numbers"),this.dialRing=this.container.querySelector(".dial-ring"),!this.dialNumbers){I.warn("[RadialDial] Required elements not found");return}this.generateDialNumbers(),this.generateTicks(),this.bindEvents()}generateDialNumbers(){if(!this.dialNumbers)return;this.dialNumbers.innerHTML="",this.cachedNumberSpans=[],this.cachedNumberElements.clear();const t=[1,2,3,4,5,6,7,8,9,0],e=this.container.offsetWidth||460,n=e*.38,s=e/2;t.forEach((o,d)=>{const h=(d*36-90)*(Math.PI/180),f=s+n*Math.cos(h),g=s+n*Math.sin(h),l=document.createElement("div");l.className="dial-number",l.dataset.num=String(o),l.innerHTML=`<span>${o}</span>`,l.style.left=`${f}px`,l.style.top=`${g}px`,l.style.transform="translate(-50%, -50%)";const m=c.getState().currentLang;l.setAttribute("tabindex","0"),l.setAttribute("role","button"),l.setAttribute("aria-label",`${k("numberLabel",m)} ${o}`);const b=A=>{const T=A;(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),this.handleNumberTap(o,l))};l.addEventListener("keydown",b),this.numberKeydownListeners.set(l,b),this.dialNumbers.appendChild(l);const v=l.querySelector("span");v&&this.cachedNumberSpans.push(v),this.cachedNumberElements.set(String(o),l)})}generateTicks(){const t=this.container.querySelector(".dial-ticks");if(t){t.innerHTML="";for(let e=0;e<60;e++){const n=document.createElement("div");n.className=`dial-tick${e%6===0?" major":""}`,n.style.transform=`rotate(${e*6}deg)`,t.appendChild(n)}}}handleNumberTap(t,e){this.bibValue.length<3&&(this.bibValue+=String(t),this.options.onChange(this.bibValue),X(),this.animation.flashPressed(e))}bindEvents(){this.interaction=new lt(this.container,{onDragStart:()=>{var t,e;this.animation.onDragStart(),(t=this.dialNumbers)==null||t.classList.remove("momentum"),(e=this.dialNumbers)==null||e.classList.add("momentum")},onNumberTap:t=>{var n;const e=(n=this.dialNumbers)==null?void 0:n.querySelector(`[data-num="${t}"]`);e&&this.handleNumberTap(t,e)},onDragMove:(t,e)=>{this.animation.onDragMove(t,e)},onDragEndWithMomentum:()=>{this.animation.startMomentumSpin()},onDragEndAsTap:()=>{var t;(t=this.dialNumbers)==null||t.classList.remove("momentum")},onDragEndCommon:()=>{var t;(t=this.dialNumbers)==null||t.classList.remove("momentum"),this.animation.onDragEndNoMomentum()},getRotation:()=>this.animation.getRotation(),getVelocity:()=>this.animation.getVelocity()}),this.interaction.bindEvents(),this.visibilityHandler=()=>{document.hidden&&this.animation.pauseAnimations()},document.addEventListener("visibilitychange",this.visibilityHandler),this.lastContainerWidth=this.container.offsetWidth,this.resizeObserver=new ResizeObserver(t=>{const e=t[0];if(!e)return;const n=Math.round(e.contentRect.width);n>0&&n!==this.lastContainerWidth&&(this.lastContainerWidth=n,this.generateDialNumbers())}),this.resizeObserver.observe(this.container)}adjustBib(t){let e=parseInt(this.bibValue||"0",10);e+=t,e<0&&(e=0),e>999&&(e=999),this.bibValue=String(e),this.options.onChange(this.bibValue),F();const n=String(e%10),s=this.cachedNumberElements.get(n);s&&this.animation.flashDigit(s)}updateDialRotation(t){if(!this.dialNumbers)return;this.dialNumbers.style.transform=`rotate(${t}deg)`;const e=`rotate(${-t}deg)`;for(const n of this.cachedNumberSpans)n.style.transform=e}getValue(){return this.bibValue}setValue(t){this.bibValue=t.slice(0,3)}clear(){this.bibValue=""}flash(){this.animation.flash(this.dialRing,this.dialNumbers)}updateAriaLabels(){const t=c.getState().currentLang;for(const[e,n]of this.cachedNumberElements)n.setAttribute("aria-label",`${k("numberLabel",t)} ${e}`)}destroy(){if(!this.isDestroyed){this.isDestroyed=!0,this.animation.destroy(),this.interaction&&(this.interaction.destroy(),this.interaction=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.visibilityHandler&&(document.removeEventListener("visibilitychange",this.visibilityHandler),this.visibilityHandler=null);for(const[t,e]of this.numberKeydownListeners)t.removeEventListener("keydown",e);this.numberKeydownListeners.clear()}}}function ut(i){const{bib:t,point:e,run:n,deviceId:s,deviceName:o,gpsService:d}=i,h=d.getTimeOffset();let f,g;h!==null?(f=new Date(Date.now()+h).toISOString(),g="gps"):(f=new Date().toISOString(),g="system");const l=d.getCoordinates(),m=d.getTimestamp()??void 0;return{entry:{id:Y(s),bib:t?t.padStart(3,"0"):"",point:e,run:n,timestamp:f,status:"ok",deviceId:s,deviceName:o,gpsCoords:l,timeSource:g,gpsTimestamp:m},timeSource:g}}function ht(i,t){return!!(i.bib&&t.some(e=>e.bib===i.bib&&e.point===i.point&&(e.run??1)===i.run))}const w=new q;let r=null,y=null,D=null,M=null,x=!1,P=[];function Tt(){if(!u("dial-container")){I.debug("[RadialTimerView] Dial container not found, skipping init");return}if(x){I.debug("[RadialTimerView] Already initialized");return}I.debug("[RadialTimerView] Initializing..."),mt(),ft(),gt(),bt(),pt(),vt(),yt(),B(),$(),E(),P=[C(()=>{nt.value,B(),$()}),C(()=>{st.value,at.value,$()}),C(()=>{c.$state.value.selectedPoint,R()}),C(()=>{c.$state.value.selectedRun,L()}),C(()=>{ot.value,E()}),C(()=>{rt.value,B()})],w.add(window,"settings-language-changed",()=>{E(),r==null||r.updateAriaLabels()}),x=!0,I.debug("[RadialTimerView] Initialized successfully")}function mt(){D&&(D(),D=null),y&&(y.destroy(),y=null);const i=u("radial-time-hm"),t=u("radial-time-seconds"),e=u("radial-time-subseconds");let n=u("clock-container");n||(n=document.createElement("div"),n.id="clock-container",n.style.display="none",document.body.appendChild(n)),y=new K(n),D=y.onTick((g,l,m,b)=>{M||(i&&(i.textContent=`${g}:${l}`),t&&(t.textContent=m),e&&(e.textContent=b))});const s=new Date,o=String(s.getHours()).padStart(2,"0"),d=String(s.getMinutes()).padStart(2,"0"),h=String(s.getSeconds()).padStart(2,"0"),f=String(s.getMilliseconds()).padStart(3,"0");i&&(i.textContent=`${o}:${d}`),t&&(t.textContent=h),e&&(e.textContent=f),y.start()}function ft(){const i=u("dial-container");if(!i)return;r&&r.destroy(),r=new dt(i,{onChange:e=>{c.setBibInput(e),S(e)},momentum:1.5,friction:.97,sensitivity:24});const t=c.getState();t.bibInput&&(r.setValue(t.bibInput),S(t.bibInput))}function S(i){const t=u("radial-bib-value");t&&(i?(t.textContent=i.padStart(3,"0"),t.classList.add("active")):(t.textContent="---",t.classList.remove("active")))}function gt(){const i=u("radial-timing-point");i&&(w.add(i,"click",t=>{const n=t.target.closest(".radial-point-btn");if(!n)return;const s=n.getAttribute("data-point");s&&(c.setSelectedPoint(s),p(),R())}),R())}function R(){const i=c.getState();document.querySelectorAll(".radial-point-btn").forEach(t=>{const e=t.getAttribute("data-point")===i.selectedPoint;t.classList.toggle("active",e),t.setAttribute("aria-checked",String(e))})}function bt(){const i=u("radial-run-selector");i&&(w.add(i,"click",t=>{const n=t.target.closest(".radial-run-btn");if(!n)return;const s=n.getAttribute("data-run");if(s){const o=parseInt(s,10);c.setSelectedRun(o),p(),L()}}),L())}function L(){const i=c.getState();document.querySelectorAll(".radial-run-btn").forEach(t=>{const n=t.getAttribute("data-run")===String(i.selectedRun);t.classList.toggle("active",n),t.setAttribute("aria-checked",String(n))})}function pt(){const i=u("radial-time-btn");i&&w.add(i,"click",z)}function vt(){const i=u("radial-clear-btn");i&&w.add(i,"click",()=>{r==null||r.clear(),c.setBibInput(""),S(""),p(),i.classList.add("flash"),setTimeout(()=>i.classList.remove("flash"),150)})}function yt(){w.add(document,"keydown",(i=>{var n;const t=(n=document.activeElement)==null?void 0:n.tagName,e=c.getState();if(!(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&e.currentView==="timer"){if(/^[0-9]$/.test(i.key)){i.preventDefault();const s=e.bibInput;if(s.length<3){const o=s+i.key;c.setBibInput(o),r==null||r.setValue(o),S(o),p()}return}if(i.key==="Backspace"){i.preventDefault();const s=e.bibInput.slice(0,-1);c.setBibInput(s),r==null||r.setValue(s),S(s),p();return}if(i.key==="Delete"||i.key==="Escape"){i.preventDefault(),r==null||r.clear(),c.setBibInput(""),S(""),p();return}if(i.key==="s"||i.key==="S"){i.preventDefault(),c.setSelectedPoint("S"),p(),R();return}if(i.key==="f"||i.key==="F"){i.preventDefault(),c.setSelectedPoint("F"),p(),R();return}if(i.altKey&&(i.code==="Digit1"||i.code==="Digit2")){i.preventDefault();const s=i.code==="Digit1"?1:2;c.setSelectedRun(s),p(),L();return}if(i.key===" "||i.key==="Enter"){i.preventDefault(),z();return}}}))}async function z(){if(j.wasRecentlyExited()){p();return}const i=c.getState();if(i.isRecording)return;const{entry:t}=ut({bib:i.bibInput,point:i.selectedPoint,run:i.selectedRun,deviceId:i.deviceId,deviceName:i.deviceName,gpsService:et});c.setRecording(!0);try{i.settings.photoCapture&&G().then(async n=>{if(n)try{await _.savePhoto(t.id,n)&&c.updateEntry(t.id,{photo:"indexeddb"})}catch(s){V("Camera","photo save",s,"photoError")}}).catch(n=>{V("Camera","captureTimingPhoto",n,"photoError")});const e=ht(t,i.entries);if(c.addEntry(t),e?J():Z(),St(t),tt.broadcastEntry(t),i.settings.auto&&i.bibInput){const n=parseInt(i.bibInput,10)+1,s=i.settings.sync&&i.cloudHighestBib>0?Math.max(n,i.cloudHighestBib+1):n,o=String(s);c.setBibInput(o),r==null||r.setValue(o),S(o)}else i.bibInput&&!i.settings.auto&&(c.setBibInput(""),r==null||r.clear(),S(""));E()}finally{c.setRecording(!1)}}function St(i){const t=new Date(i.timestamp),e=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0"),o=String(t.getMilliseconds()).padStart(3,"0"),d=`${e}:${n}:${s}.${o}`;M=d;const h=u("radial-time-hm"),f=u("radial-time-seconds"),g=u("radial-time-subseconds");h&&(h.textContent=`${e}:${n}`),f&&(f.textContent=s),g&&(g.textContent=o);const l=u("dial-ring"),m=u("radial-time-display"),b=u("radial-time-btn");l==null||l.classList.add("flash"),m==null||m.classList.add("flash","frozen"),b==null||b.classList.add("flash"),r==null||r.flash();const v=u("radial-confirmation-overlay"),A=u("radial-confirm-bib"),T=u("radial-confirm-time"),N=u("radial-confirm-point");if(A&&(A.textContent=i.bib||"---"),T&&(T.textContent=d),N){const H=c.getState();N.textContent=it(i.point,H.currentLang),N.className=`radial-confirmation-point ${i.point==="S"?"start":"finish"}`}v==null||v.classList.add("show"),setTimeout(()=>{M=null,l==null||l.classList.remove("flash"),m==null||m.classList.remove("flash","frozen"),b==null||b.classList.remove("flash"),v==null||v.classList.remove("show")},1200)}function B(){const i=c.getState(),t=u("radial-gps-status");if(!t)return;const e=t.querySelector(".radial-status-dot");e&&(i.settings.gps?i.gpsStatus==="active"?e.className="radial-status-dot":i.gpsStatus==="searching"?e.className="radial-status-dot warning":e.className="radial-status-dot inactive":e.className="radial-status-dot inactive")}function $(){const i=c.getState(),t=u("radial-sync-status");if(!t)return;if(!i.settings.sync){t.style.display="none";return}t.style.display="flex";const e=t.querySelector(".radial-status-dot"),n=t.querySelector(".radial-sync-text");if(e&&(i.syncStatus==="connected"?e.className="radial-status-dot":i.syncStatus==="error"?e.className="radial-status-dot error":e.className="radial-status-dot warning"),n){const s=i.cloudDeviceCount||0,o=i.currentLang;n.textContent=s>0?`${k("synced",o)} (${s})`:k("syncingStatus",o)}}function E(){const i=c.getState(),t=i.entries,e=u("radial-stats-count");if(e&&(e.textContent=`${t.length} ${t.length===1?k("entry",i.currentLang):k("entries",i.currentLang)}`),t.length>0){const n=t[t.length-1],s=u("radial-last-bib"),o=u("radial-last-point"),d=u("radial-last-time");if(s&&(s.textContent=n.bib||"---"),o&&(o.textContent=n.point==="S"?k("startShort",i.currentLang):k("finishShort",i.currentLang),o.className=`radial-stats-point ${n.point==="S"?"start":"finish"}`),d){const h=new Date(n.timestamp);d.textContent=Q(h)}}}function Ct(){for(const i of P)i();P=[],D&&(D(),D=null),y&&(y.destroy(),y=null),w.removeAll(),r&&(r.destroy(),r=null),M=null,x=!1}function It(){const i=c.getState();S(i.bibInput),r==null||r.setValue(i.bibInput)}function Rt(){const i=document.querySelector(".timer-view");return(i==null?void 0:i.classList.contains("radial-mode"))??!1}export{Rt as a,Tt as b,ut as c,Ct as d,ht as i,It as u};
